# Guide de Configuration - WP Rolling Mail

**Version 1.0** | Plugin WordPress de rotation d'emails pour Formidable Forms

---

## 1. INTRODUCTION

### Qu'est-ce que WP Rolling Mail ?

**WP Rolling Mail** (√©galement appel√© "Formidable Sequential Submissions") est un plugin WordPress qui automatise la distribution √©quitable des formulaires web entre plusieurs destinataires. Au lieu d'envoyer tous les formulaires √† une seule personne, le plugin les distribue tour √† tour (rotation s√©quentielle) √† une liste d'adresses email configurables.

**Exemple concret :** Vous avez 3 commerciaux qui doivent recevoir les demandes de contact. Au lieu que le premier re√ßoive tous les leads, le plugin distribue automatiquement : lead 1 ‚Üí commercial A, lead 2 ‚Üí commercial B, lead 3 ‚Üí commercial C, lead 4 ‚Üí retour au commercial A, etc.

Le plugin inclut √©galement un **routage th√©matique avanc√©** qui permet d'envoyer diff√©rents types de demandes √† des √©quipes sp√©cialis√©es (ex: les demandes "Sant√©" vers l'√©quipe sant√©, les demandes "Retraite" vers l'√©quipe retraite).

### Qui devrait lire ce guide ?

Ce guide s'adresse aux **administrateurs WordPress** qui doivent configurer et g√©rer la distribution des formulaires. Aucune comp√©tence technique avanc√©e n'est requise - le guide explique chaque √©tape en d√©tail avec des exemples concrets.

Vous devez simplement avoir acc√®s au tableau de bord WordPress de votre site avec les droits d'administrateur.

### Pr√©requis techniques

Avant d'utiliser WP Rolling Mail, assurez-vous que votre site poss√®de :

- **WordPress** version 5.0 ou sup√©rieure
- **Formidable Forms** (version gratuite ou Pro) - plugin de cr√©ation de formulaires
- **Acc√®s administrateur** au tableau de bord WordPress
- **Configuration email fonctionnelle** - votre WordPress doit pouvoir envoyer des emails (testez avec un formulaire classique d'abord)

---

## 2. CONCEPTS CL√âS

Avant de commencer la configuration, comprenons les concepts fondamentaux du plugin.

### 2.1 Rotation d'emails

#### Qu'est-ce que c'est ?

La rotation d'emails est un syst√®me de distribution √©quitable qui envoie chaque nouveau formulaire √† une adresse diff√©rente en suivant un ordre s√©quentiel. Une fois arriv√© au bout de la liste, le syst√®me recommence au d√©but.

#### Pourquoi c'est utile ?

Sans rotation, tous les formulaires arrivent √† la m√™me personne, ce qui cr√©e :
- Une surcharge de travail pour une seule personne
- Une distribution in√©gale des opportunit√©s commerciales
- Un risque si cette personne est absente ou en cong√©

Avec la rotation, vous assurez :
- Une distribution √©quitable automatique
- Une meilleure r√©activit√© (charge de travail r√©partie)
- Une continuit√© de service

#### Exemple concret : 3 commerciaux qui re√ßoivent des leads tour √† tour

Imaginons une entreprise avec 3 commerciaux : Alice, Bob et Claire.

**Configuration :**
- alice@entreprise.fr
- bob@entreprise.fr
- claire@entreprise.fr

**R√©sultat :**
- Formulaire n¬∞1 (lundi 10h) ‚Üí Alice
- Formulaire n¬∞2 (lundi 14h) ‚Üí Bob
- Formulaire n¬∞3 (mardi 9h) ‚Üí Claire
- Formulaire n¬∞4 (mardi 11h) ‚Üí Alice (retour au d√©but)
- Formulaire n¬∞5 (mercredi 8h) ‚Üí Bob
- Et ainsi de suite...

Sur 30 demandes, chacun recevra environ 10 leads de fa√ßon automatique et √©quitable.

---

### 2.2 Routage th√©matique

#### Qu'est-ce que c'est ?

Le routage th√©matique permet d'envoyer automatiquement les formulaires vers diff√©rentes listes de rotation selon une cat√©gorie choisie par l'utilisateur dans le formulaire.

Au lieu d'avoir une seule liste pour tous les formulaires, vous pouvez avoir plusieurs listes sp√©cialis√©es. Le plugin lit une valeur dans le formulaire (par exemple un champ radio "Type de demande") et route automatiquement vers la bonne √©quipe.

#### Diff√©rence avec rotation simple

**Rotation simple :**
- Une seule liste d'emails
- Tous les formulaires vont dans la m√™me rotation
- Pas de distinction par type de demande

**Routage th√©matique :**
- Plusieurs listes d'emails (une par th√©matique)
- Chaque type de demande a sa propre rotation
- Distribution intelligente selon le contenu du formulaire

#### Exemple concret : D√©partement Sant√© vs D√©partement Retraite

**Situation :** Vous √™tes une compagnie d'assurance avec 3 d√©partements sp√©cialis√©s.

**Dans votre formulaire Formidable, vous avez un champ radio :**
```
Type de demande :
‚óã Sant√© / Mutuelle
‚óã Pr√©voyance
‚óã √âpargne Retraite
```

**Configuration du routage th√©matique :**

**√âquipe Sant√© :**
- sante1@entreprise.fr
- sante2@entreprise.fr

**√âquipe Pr√©voyance :**
- prevoyance@entreprise.fr

**√âquipe Retraite :**
- retraite1@entreprise.fr
- retraite2@entreprise.fr
- retraite3@entreprise.fr

**R√©sultat automatique :**

| Formulaire | Valeur choisie | Destinataire |
|------------|----------------|--------------|
| #1 | Sant√© | sante1@entreprise.fr |
| #2 | Sant√© | sante2@entreprise.fr (rotation) |
| #3 | Retraite | retraite1@entreprise.fr |
| #4 | Pr√©voyance | prevoyance@entreprise.fr |
| #5 | Sant√© | sante1@entreprise.fr (retour au d√©but) |
| #6 | Retraite | retraite2@entreprise.fr (rotation) |

Chaque th√©matique a sa propre rotation ind√©pendante. Les experts Sant√© ne re√ßoivent que les demandes Sant√©, les experts Retraite ne re√ßoivent que les demandes Retraite, etc.

---

### 2.3 Liste de fallback (principale)

#### Qu'est-ce que c'est ?

La liste de fallback (ou "liste principale") est une liste d'emails de secours utilis√©e quand le routage th√©matique ne peut pas fonctionner.

C'est votre **filet de s√©curit√©** : si le plugin ne sait pas o√π envoyer un formulaire, il l'envoie √† cette liste.

#### Quand est-elle utilis√©e ?

La liste principale est utilis√©e dans ces situations :

1. **Routage th√©matique d√©sactiv√©** ‚Üí Tous les formulaires vont √† cette liste
2. **Champ th√©matique non rempli** ‚Üí Si l'utilisateur ne s√©lectionne rien dans le champ "Type de demande"
3. **Valeur inattendue** ‚Üí Si une nouvelle valeur appara√Æt qui n'a pas √©t√© configur√©e
4. **Liste th√©matique vide** ‚Üí Si une th√©matique n'a aucun email configur√©
5. **Erreur de configuration** ‚Üí Si le champ th√©matique configur√© n'existe plus dans Formidable

#### Pourquoi c'est important

Sans liste de fallback, certains formulaires pourraient ne jamais √™tre envoy√©s si le routage th√©matique √©choue. La liste principale garantit qu'**aucun formulaire n'est perdu**.

**Recommandation :** M√™me si vous utilisez le routage th√©matique, configurez toujours au moins une adresse dans la liste principale (par exemple : contact-general@entreprise.fr ou direction@entreprise.fr).

---

### 2.4 CC (Copies Carbone)

#### √Ä quoi servent-elles ?

Les adresses en CC (Copie Carbone) re√ßoivent une copie de **TOUS** les formulaires envoy√©s, quelle que soit la th√©matique ou la rotation.

Contrairement aux listes de rotation o√π chaque email ne re√ßoit qu'une partie des formulaires, les CC re√ßoivent absolument tout.

#### Cas d'usage typiques

**1. Supervision manag√©riale**
```
Liste principale : commercial1@, commercial2@, commercial3@
CC : directeur-commercial@entreprise.fr

R√©sultat : Les commerciaux re√ßoivent les leads en rotation,
mais le directeur re√ßoit une copie de TOUT pour superviser.
```

**2. Archivage centralis√©**
```
Liste principale : support1@, support2@
CC : archive@entreprise.fr

R√©sultat : Les agents support traitent les tickets en rotation,
mais tous les tickets sont archiv√©s dans la bo√Æte "archive@".
```

**3. Int√©gration CRM automatique**
```
Liste principale : vente@entreprise.fr
CC : crm-ingest@entreprise.fr

R√©sultat : L'√©quipe vente re√ßoit les leads normalement,
mais une copie est envoy√©e au CRM qui l'ing√®re automatiquement
via une adresse email sp√©ciale.
```

**4. Direction et conformit√©**
```
Liste th√©matique Sant√© : sante1@, sante2@
Liste th√©matique Retraite : retraite@
CC : conformite@entreprise.fr

R√©sultat : Chaque d√©partement re√ßoit ses demandes,
mais le service conformit√© re√ßoit tout pour audit.
```

**Important :** Utilisez les CC avec parcimonie. Si vous mettez 5 adresses en CC, chaque formulaire g√©n√®rera 5 emails suppl√©mentaires (plus l'email principal = 6 emails au total).

---

## 3. ACC√âDER AU PLUGIN

### Localisation dans WordPress

Une fois le plugin install√© et activ√©, acc√©dez √† la configuration :

**Chemin complet :**
```
Tableau de bord WordPress
    ‚Üí Menu lat√©ral gauche
    ‚Üí Sequential Submissions (ic√¥ne email üìß)
```

Le menu appara√Æt dans la barre lat√©rale principale, g√©n√©ralement en position haute (juste apr√®s le tableau de bord).

**Note :** Si vous ne voyez pas ce menu, v√©rifiez que :
1. Le plugin est bien activ√© (Extensions ‚Üí Plugins install√©s ‚Üí "Formidable Sequential Submissions" doit √™tre activ√©)
2. Votre compte a les droits d'administrateur
3. Formidable Forms est install√© et activ√©

### Description de la page de configuration

Lorsque vous cliquez sur "Sequential Submissions", vous arrivez sur une page avec plusieurs sections :

**Section 1 : Form Filter Mode**
‚Üí Choisir quels formulaires utilisent la rotation (tous ou seulement certains)

**Section 2 : Thematic Filter Mode**
‚Üí Activer/d√©sactiver le routage par th√©matique

**Section 3 : Thematic Field Selection**
‚Üí Choisir le champ Formidable qui d√©termine la th√©matique (ex: "Type de demande")

**Section 4 : Thematic Email Mappings**
‚Üí Configurer les emails pour chaque th√©matique (Sant√©, Pr√©voyance, Retraite, etc.)

**Section 5 : Email Subject**
‚Üí D√©finir le sujet de tous les emails

**Section 6 : Email Addresses (liste principale)**
‚Üí La liste de fallback / rotation principale

**Section 7 : CC Email Addresses**
‚Üí Les adresses qui re√ßoivent TOUT en copie

**Bouton en bas :** "Enregistrer les modifications" (TOUJOURS sauvegarder apr√®s chaque modification)

---

## 4. CONFIGURATION DE BASE (Sc√©nario simple)

### Objectif

Mettre en place une rotation simple entre 3 adresses email, sans routage th√©matique. Id√©al pour d√©buter avec le plugin.

**Ce que vous allez cr√©er :**
- 3 commerciaux re√ßoivent les formulaires tour √† tour
- Pas de distinction par type de demande
- Distribution √©quitable automatique

---

### √âtape 1 : Email Subject (Sujet des emails)

**1.1** Acc√©dez √† la page de configuration : `Tableau de bord ‚Üí Sequential Submissions`

**1.2** Descendez jusqu'√† la section **"Email Subject"**

**1.3** Dans le champ texte, saisissez le sujet souhait√© :
```
Nouveau formulaire de contact
```
Ou bien :
```
Demande d'information - Site web
```

**1.4** Cliquez sur le bouton **"Enregistrer les modifications"** en bas de page

**1.5** V√©rifiez qu'un message de confirmation appara√Æt en haut de la page (fond vert)

**Pourquoi cette √©tape ?** Le sujet permet au destinataire de savoir instantan√©ment de quoi il s'agit dans sa bo√Æte mail. Choisissez un sujet clair et professionnel.

---

### √âtape 2 : Email Addresses (Configuration de la rotation)

**2.1** Dans la m√™me page, localisez la section **"Email Addresses"**

**2.2** Cette section affiche la liste principale de rotation. Par d√©faut, elle peut √™tre vide.

**2.3** Cliquez sur le bouton **"Ajouter un autre email"** (en anglais : "add another email")

**2.4** Un nouveau champ email appara√Æt. Saisissez la premi√®re adresse :
```
commercial1@entreprise.fr
```

**2.5** Cliquez √† nouveau sur **"Ajouter un autre email"**

**2.6** Saisissez la deuxi√®me adresse :
```
commercial2@entreprise.fr
```

**2.7** Cliquez une troisi√®me fois sur **"Ajouter un autre email"**

**2.8** Saisissez la troisi√®me adresse :
```
commercial3@entreprise.fr
```

**Votre configuration devrait ressembler √† :**
```
Email Addresses
---------------
Email 1: commercial1@entreprise.fr [üóë]
Email 2: commercial2@entreprise.fr [üóë]
Email 3: commercial3@entreprise.fr [üóë]

[Ajouter un autre email]
```

**2.9** Cliquez sur **"Enregistrer les modifications"**

**2.10** Attendez le message de confirmation (fond vert en haut)

**Astuce :** Vous pouvez ajouter autant d'emails que n√©cessaire (5, 10, 20...). La rotation s'adapte automatiquement. Pour supprimer un email, cliquez sur l'ic√¥ne üóë (poubelle) √† droite de l'adresse.

---

### √âtape 3 : V√©rification de la configuration

Avant de tester en r√©el, v√©rifiez que tout est correct :

**3.1** V√©rifiez que la section **"Thematic Filter Mode"** est sur **"Disabled"**
‚Üí Vous ne voulez pas de routage th√©matique pour cette configuration simple

**3.2** V√©rifiez que la section **"Form Filter Mode"** est sur **"All forms"**
‚Üí Tous vos formulaires Formidable utiliseront la rotation

**3.3** La section **"CC Email Addresses"** peut rester vide pour l'instant

**3.4** Sauvegardez une derni√®re fois si vous avez fait des changements

---

### √âtape 4 : Test de la rotation

Maintenant, testons que la rotation fonctionne correctement.

**4.1** Allez sur une page de votre site contenant un formulaire Formidable

**4.2** Remplissez le formulaire avec des donn√©es de test (utilisez vos vraies adresses email pour v√©rifier)

**4.3** Soumettez le formulaire (premier envoi)

**4.4** V√©rifiez que **commercial1@entreprise.fr** a re√ßu l'email

**4.5** Soumettez le formulaire une deuxi√®me fois (avec d'autres donn√©es)

**4.6** V√©rifiez que **commercial2@entreprise.fr** a re√ßu ce second email

**4.7** Soumettez une troisi√®me fois

**4.8** V√©rifiez que **commercial3@entreprise.fr** a re√ßu ce troisi√®me email

**4.9** Soumettez une quatri√®me fois

**4.10** V√©rifiez que l'email est revenu √† **commercial1@entreprise.fr** (rotation boucl√©e)

**En cas de probl√®me :**
- V√©rifiez vos adresses email (pas de typo ?)
- V√©rifiez que WordPress peut envoyer des emails (testez avec un formulaire classique)
- Consultez la section "D√©pannage" de ce guide (section 8)

---

### R√©sultat attendu

Apr√®s ces √©tapes, voici ce qui se passe automatiquement √† chaque soumission de formulaire :

```
Formulaire #1 ‚Üí commercial1@entreprise.fr
Formulaire #2 ‚Üí commercial2@entreprise.fr
Formulaire #3 ‚Üí commercial3@entreprise.fr
Formulaire #4 ‚Üí commercial1@entreprise.fr (rotation compl√®te, retour au d√©but)
Formulaire #5 ‚Üí commercial2@entreprise.fr
Formulaire #6 ‚Üí commercial3@entreprise.fr
Formulaire #7 ‚Üí commercial1@entreprise.fr
...et ainsi de suite
```

**Distribution sur 30 formulaires :**
- commercial1@ recevra 10 formulaires
- commercial2@ recevra 10 formulaires
- commercial3@ recevra 10 formulaires

**F√©licitations !** Vous avez configur√© avec succ√®s la rotation de base. Tous les nouveaux formulaires seront automatiquement distribu√©s de fa√ßon √©quitable.

---

## 5. CONFIGURATION AVANC√âE (Routage th√©matique)

### Objectif

Mettre en place un syst√®me de routage intelligent qui envoie automatiquement :
- Les formulaires "Sant√©" vers l'√©quipe Sant√©
- Les formulaires "Pr√©voyance" vers l'√©quipe Pr√©voyance
- Les formulaires "Retraite" vers l'√©quipe Retraite

Chaque √©quipe peut avoir plusieurs membres (rotation ind√©pendante).

### Pr√©requis

Avant de configurer le routage th√©matique, vous devez avoir dans Formidable Forms :

**1. Un champ de choix unique** (radio button ou liste d√©roulante)

**Exemple de configuration dans Formidable :**
```
Nom du champ : Type de demande
Type de champ : Radio Button
Options :
  ‚óã Sant√© / Mutuelle
  ‚óã Pr√©voyance
  ‚óã √âpargne Retraite
```

**2. Notez l'ID du champ**

Pour trouver l'ID du champ dans Formidable Forms :
1. Allez dans Formidable ‚Üí Formulaires
2. Modifiez votre formulaire
3. Cliquez sur le champ "Type de demande"
4. Dans l'encadr√© de droite, cherchez "ID du champ" ou "Field ID"
5. Notez ce num√©ro (par exemple : 8)

**Important :** Le champ DOIT √™tre de type radio button ou liste d√©roulante (select). Les champs texte, checkbox multiples ou autres types ne sont pas compatibles avec le routage th√©matique.

---

### √âtape 1 : Activer le routage th√©matique

**1.1** Acc√©dez √† `Tableau de bord ‚Üí Sequential Submissions`

**1.2** Localisez la section **"Thematic Filter Mode"** (en haut de la page)

**1.3** Dans le menu d√©roulant, s√©lectionnez **"Enabled (route by thematic field)"**

**1.4** Cliquez sur **"Enregistrer les modifications"**

**1.5** La page se recharge. Vous verrez maintenant de nouvelles sections appara√Ætre.

**Ce qui se passe :** En activant ce mode, vous dites au plugin : "Je veux router les formulaires selon une cat√©gorie, pas juste faire une rotation simple."

---

### √âtape 2 : S√©lectionner le champ th√©matique

**2.1** Juste en dessous, localisez la section **"Thematic Field Selection"**

**2.2** Vous verrez un message explicatif bleu qui dit : "Un champ th√©matique permet de router automatiquement les emails..."

**2.3** Dans le menu d√©roulant, recherchez votre champ "Type de demande"

Le format affich√© sera quelque chose comme :
```
Type de demande (ID: 8, Form: Formulaire de contact, Type: radio)
```

**2.4** S√©lectionnez ce champ dans la liste

**2.5** Attendez quelques secondes - un message "‚è≥ Chargement des valeurs du champ..." appara√Æt

**2.6** La page se recharge automatiquement

**Ce qui se passe :** Le plugin va lire toutes les soumissions existantes de votre formulaire et d√©tecter toutes les valeurs qui ont √©t√© choisies dans ce champ (Sant√©, Pr√©voyance, Retraite, etc.). Ces valeurs appara√Ætront dans l'√©tape suivante.

**Note :** Si vous n'avez encore aucune soumission de formulaire, aucune valeur ne sera d√©tect√©e. Dans ce cas, soumettez au moins un formulaire de test avec chaque option avant de continuer.

---

### √âtape 3 : Configurer les emails par th√©matique

Apr√®s le rechargement de la page, une nouvelle section appara√Æt : **"Thematic Email Mappings"** (Configuration des emails par th√©matique).

Cette section affiche automatiquement toutes les valeurs d√©tect√©es. Dans notre exemple, vous devriez voir 3 blocs :

#### Bloc 1 : Sant√© / Mutuelle

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Sant√© / Mutuelle (12 entries)              ‚îÇ
‚îÇ Normalized key: sante_mutuelle             ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ [Aucun champ email pour l'instant]         ‚îÇ
‚îÇ                                             ‚îÇ
‚îÇ [Ajouter un autre email]                   ‚îÇ
‚îÇ                                             ‚îÇ
‚îÇ ‚ö†Ô∏è Aucun email configur√© pour cette valeur ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**3.1** Cliquez sur le bouton **"Ajouter un autre email"** dans le bloc Sant√©

**3.2** Saisissez la premi√®re adresse de l'√©quipe Sant√© :
```
sante1@entreprise.fr
```

**3.3** Cliquez √† nouveau sur **"Ajouter un autre email"**

**3.4** Saisissez la deuxi√®me adresse :
```
sante2@entreprise.fr
```

Le bloc Sant√© devrait maintenant ressembler √† :
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Sant√© / Mutuelle (12 entries)              ‚îÇ
‚îÇ Normalized key: sante_mutuelle             ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ Email 1: sante1@entreprise.fr [üóë]         ‚îÇ
‚îÇ Email 2: sante2@entreprise.fr [üóë]         ‚îÇ
‚îÇ                                             ‚îÇ
‚îÇ [Ajouter un autre email]                   ‚îÇ
‚îÇ                                             ‚îÇ
‚îÇ ‚úÖ 2 email(s) configur√©(s)                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

#### Bloc 2 : Pr√©voyance

**3.5** Descendez au bloc "Pr√©voyance"

**3.6** Cliquez sur **"Ajouter un autre email"**

**3.7** Saisissez l'adresse de l'√©quipe Pr√©voyance :
```
prevoyance@entreprise.fr
```

Pour cette th√©matique, une seule adresse suffit (pas de rotation, tous les formulaires Pr√©voyance iront √† cette unique adresse).

#### Bloc 3 : √âpargne Retraite

**3.8** Descendez au bloc "√âpargne Retraite"

**3.9** Cliquez sur **"Ajouter un autre email"** trois fois

**3.10** Saisissez les 3 adresses de l'√©quipe Retraite :
```
retraite1@entreprise.fr
retraite2@entreprise.fr
retraite3@entreprise.fr
```

**Important :** Si une th√©matique a plusieurs emails, la rotation se fera uniquement au sein de cette th√©matique. Par exemple, les 3 adresses retraite@ tourneront uniquement entre elles pour les formulaires "Retraite".

---

### √âtape 4 : Configurer la liste de fallback

C'est l'√©tape CRUCIALE pour √©viter la perte de formulaires.

**4.1** Descendez jusqu'√† la section **"Email Addresses"** (liste principale)

**4.2** Cliquez sur **"Ajouter un autre email"**

**4.3** Saisissez au moins une adresse de secours :
```
contact-general@entreprise.fr
```
Ou bien :
```
direction@entreprise.fr
```

**Pourquoi cette √©tape est importante ?**

La liste de fallback sera utilis√©e dans ces cas :
- Un utilisateur soumet le formulaire sans s√©lectionner de type de demande
- Une nouvelle valeur appara√Æt (par exemple si vous ajoutez "Automobile" plus tard)
- Une th√©matique n'a aucun email configur√©
- Le champ th√©matique est supprim√© par erreur de Formidable

**Recommandation :** Utilisez une adresse g√©n√©rique qui est surveill√©e quotidiennement, comme contact@, info@ ou direction@.

**4.4** Cliquez sur **"Enregistrer les modifications"**

**4.5** Attendez le message de confirmation

---

### √âtape 5 : Test du routage th√©matique

Maintenant, testons que chaque th√©matique route correctement.

**Test 1 : Formulaire "Sant√©"**

**5.1** Allez sur votre formulaire

**5.2** S√©lectionnez "Sant√© / Mutuelle" dans le champ radio

**5.3** Remplissez et soumettez le formulaire

**5.4** V√©rifiez que **sante1@entreprise.fr** a re√ßu l'email

**5.5** Soumettez un second formulaire "Sant√©"

**5.6** V√©rifiez que **sante2@entreprise.fr** a re√ßu l'email (rotation)

**5.7** Soumettez un troisi√®me formulaire "Sant√©"

**5.8** V√©rifiez que l'email revient √† **sante1@entreprise.fr**

‚úÖ **R√©sultat attendu :** La rotation fonctionne au sein de l'√©quipe Sant√©.

---

**Test 2 : Formulaire "Retraite"**

**5.9** Soumettez un formulaire en s√©lectionnant "√âpargne Retraite"

**5.10** V√©rifiez que **retraite1@entreprise.fr** a re√ßu l'email

**5.11** Soumettez un second formulaire "Retraite"

**5.12** V√©rifiez que **retraite2@entreprise.fr** a re√ßu l'email

‚úÖ **R√©sultat attendu :** Chaque th√©matique a sa rotation ind√©pendante. Les envois "Sant√©" n'affectent pas la rotation "Retraite".

---

**Test 3 : Formulaire sans s√©lection (fallback)**

**5.13** Soumettez un formulaire SANS s√©lectionner de type de demande (laissez le champ vide si possible, ou modifiez temporairement le formulaire pour que le champ ne soit pas obligatoire)

**5.14** V√©rifiez que **contact-general@entreprise.fr** a re√ßu l'email

‚úÖ **R√©sultat attendu :** Le fallback fonctionne quand aucune th√©matique n'est d√©tect√©e.

---

### Sch√©ma de fonctionnement (Vue d'ensemble)

Voici ce qui se passe en coulisse √† chaque soumission :

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Formulaire soumis              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
               ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Lecture du champ th√©matique    ‚îÇ
‚îÇ  (ex: Field ID 8)               ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
               ‚Üì
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ  Valeur ?   ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îò
              ‚îÇ   ‚îÇ
        OUI ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ NON
         ‚Üì             ‚Üì
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇTh√©matique‚îÇ   ‚îÇListe    ‚îÇ
    ‚îÇd√©tect√©e  ‚îÇ   ‚îÇprincipale‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ             ‚îÇ
         ‚Üì             ‚Üì
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇSant√© =  ‚îÇ   ‚îÇgeneral@ ‚îÇ
    ‚îÇsante1@  ‚îÇ   ‚îÇ         ‚îÇ
    ‚îÇou       ‚îÇ   ‚îÇ         ‚îÇ
    ‚îÇsante2@  ‚îÇ   ‚îÇ         ‚îÇ
    ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
    ‚îÇRetraite ‚îÇ
    ‚îÇ= ret1@  ‚îÇ
    ‚îÇou ret2@ ‚îÇ
    ‚îÇou ret3@ ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**En r√©sum√© :**
1. Le plugin lit la valeur du champ th√©matique
2. Si une valeur est d√©tect√©e ET qu'une liste d'emails existe pour cette valeur ‚Üí utilise cette liste
3. Sinon ‚Üí utilise la liste principale (fallback)
4. Applique la rotation au sein de la liste choisie
5. Envoie l'email au destinataire s√©lectionn√©

---

## 6. CONFIGURATION DES CC (Copies Carbone)

### Objectif

Ajouter des adresses qui recevront une copie de TOUS les formulaires, quelle que soit la th√©matique ou la rotation. Id√©al pour la supervision, l'archivage ou l'int√©gration avec un CRM.

---

### Cas d'usage typiques

#### Cas 1 : Direction qui veut tout superviser

**Besoin :** Le directeur commercial veut recevoir une copie de tous les leads, m√™me s'ils sont distribu√©s aux commerciaux.

**Solution :** Ajouter directeur@entreprise.fr en CC

**R√©sultat :**
- Les commerciaux continuent de recevoir les leads en rotation (chacun leur tour)
- Le directeur re√ßoit TOUT en copie pour supervision
- Personne ne manque d'information

---

#### Cas 2 : Archivage automatique

**Besoin :** Garder une trace de tous les formulaires dans une bo√Æte mail d√©di√©e, pour audit et conformit√©.

**Solution :** Ajouter archive@entreprise.fr en CC

**R√©sultat :**
- Les √©quipes traitent les demandes normalement
- Tous les formulaires s'accumulent dans la bo√Æte "archive@" pour historique
- Facilite les recherches et les audits

---

#### Cas 3 : Int√©gration CRM

**Besoin :** Votre CRM (Salesforce, HubSpot, Pipedrive, etc.) peut ing√©rer automatiquement les emails envoy√©s √† une adresse sp√©cifique.

**Solution :** Ajouter l'adresse d'ingestion du CRM en CC (par exemple : crm-ingest-abc123@yourcrm.com)

**R√©sultat :**
- Les commerciaux re√ßoivent les leads normalement
- Le CRM re√ßoit une copie et cr√©e automatiquement un contact/deal
- Synchronisation automatique sans action manuelle

---

### √âtapes de configuration

**√âtape 1 : Acc√©der √† la section CC**

**1.1** Acc√©dez √† `Tableau de bord ‚Üí Sequential Submissions`

**1.2** Descendez jusqu'√† la section **"CC Email Addresses"** (en bas de page)

**1.3** Vous verrez un message explicatif bleu :
```
üìß Les emails en copie (CC) re√ßoivent TOUS les formulaires
Les adresses en copie carbone recevront syst√©matiquement une copie
de chaque formulaire soumis, qu'il soit rout√© via la liste principale
ou via une liste th√©matique.
```

---

**√âtape 2 : Ajouter une adresse CC**

**2.1** Cliquez sur le bouton **"Ajouter un autre email CC"** ("add another cc email")

**2.2** Un nouveau champ appara√Æt. Saisissez l'adresse :
```
direction@entreprise.fr
```
Ou bien :
```
archive@entreprise.fr
```
Ou encore :
```
crm-ingest@yourcrm.com
```

**2.3** Si vous avez plusieurs adresses √† ajouter en CC, cliquez √† nouveau sur **"Ajouter un autre email CC"** et r√©p√©tez l'op√©ration

---

**√âtape 3 : Sauvegarder**

**3.1** Cliquez sur **"Enregistrer les modifications"**

**3.2** Attendez le message de confirmation (fond vert)

**3.3** Vous verrez un message de confirmation :
```
‚úÖ X email(s) en copie configur√©(s) - Ces adresses recevront
une copie de chaque formulaire.
```

---

**√âtape 4 : Tester**

**4.1** Soumettez un formulaire de test

**4.2** V√©rifiez que :
- Le destinataire principal a re√ßu l'email (selon la rotation)
- L'adresse CC a √©galement re√ßu une copie du m√™me email

**4.3** Soumettez un second formulaire (qui ira √† un autre destinataire en rotation)

**4.4** V√©rifiez que l'adresse CC a encore re√ßu une copie

---

### Important : Gestion du volume

‚ö†Ô∏è **Attention au nombre de CC**

Chaque adresse CC g√©n√®re un email suppl√©mentaire par formulaire.

**Exemple :**
- 1 destinataire principal + 0 CC = 1 email envoy√©
- 1 destinataire principal + 1 CC = 2 emails envoy√©s
- 1 destinataire principal + 3 CC = 4 emails envoy√©s

Si vous recevez 100 formulaires par jour et avez 3 adresses en CC :
‚Üí 400 emails envoy√©s par jour au total (100 √ó 4)

**Recommandation :**
- Limitez les CC √† 1 ou 2 adresses maximum
- Utilisez des adresses d√©di√©es (archive@, supervision@) plut√¥t que des bo√Ætes personnelles qui seront inond√©es
- Si vous avez besoin de plusieurs superviseurs, cr√©ez une liste de diffusion c√¥t√© serveur mail (ex: supervision@entreprise.fr qui redirige vers 3 personnes), et mettez cette unique adresse en CC

---

## 7. CAS D'USAGE COMPLETS

Cette section pr√©sente des sc√©narios r√©els de A √† Z pour vous inspirer et vous guider.

---

### Cas 1 : PME avec 3 commerciaux (Configuration simple)

#### Contexte

**Entreprise :** PME de services B2B avec 3 commerciaux

**Besoin :**
- Distribuer √©quitablement les demandes de contact du site web
- Chaque commercial doit recevoir environ 33% des leads
- Pas de distinction par type de produit (tous les commerciaux sont polyvalents)

#### Configuration

**Form Filter Mode :** All forms (tous les formulaires)

**Thematic Filter Mode :** Disabled (pas de routage th√©matique)

**Email Subject :** "Nouvelle demande de contact - Site web"

**Email Addresses (liste principale) :**
- alice@entreprise.fr
- bob@entreprise.fr
- claire@entreprise.fr

**CC Email Addresses :** (vide - pas de supervision)

#### R√©sultat

Sur 30 demandes de contact :
- Alice recevra 10 demandes
- Bob recevra 10 demandes
- Claire recevra 10 demandes

Distribution automatique, √©quitable, sans intervention humaine.

#### Avantages

- Configuration en 5 minutes
- Aucun risque d'oubli ou de favoritisme
- Si un commercial est absent, il re√ßoit quand m√™me ses leads (il les traitera √† son retour)
- √âquit√© totale sur le long terme

#### Points de vigilance

- Si un commercial part en cong√© de 2 semaines, ses leads s'accumulent dans sa bo√Æte
- Solution : modifier temporairement la liste en retirant son adresse pendant l'absence

---

### Cas 2 : Entreprise multi-d√©partements (Configuration avanc√©e)

#### Contexte

**Entreprise :** Compagnie d'assurance avec d√©partements sp√©cialis√©s

**Besoin :**
- Router automatiquement selon le type de demande (Sant√©, Pr√©voyance, Retraite)
- Chaque d√©partement a plusieurs experts (rotation interne)
- La direction veut recevoir une copie de tout
- Une adresse g√©n√©rique doit g√©rer les demandes "Autre"

#### Configuration

**Form Filter Mode :** All forms

**Thematic Filter Mode :** Enabled

**Thematic Field Selection :** Field ID 8 - "Type de demande" (radio)

**Thematic Email Mappings :**

**Sant√© / Mutuelle :**
- sante1@entreprise.fr
- sante2@entreprise.fr

**Pr√©voyance :**
- prevoyance1@entreprise.fr
- prevoyance2@entreprise.fr

**√âpargne Retraite :**
- retraite1@entreprise.fr
- retraite2@entreprise.fr
- retraite3@entreprise.fr

**Email Subject :** "Nouvelle demande d'information"

**Email Addresses (liste principale - fallback) :**
- contact@entreprise.fr

**CC Email Addresses :**
- direction@entreprise.fr

#### R√©sultat d√©taill√©

**Sc√©nario 1 : Formulaire "Sant√©"**
- Formulaire #1 Sant√© ‚Üí sante1@entreprise.fr + direction@ (CC)
- Formulaire #2 Sant√© ‚Üí sante2@entreprise.fr + direction@ (CC)
- Formulaire #3 Sant√© ‚Üí sante1@entreprise.fr + direction@ (CC) [rotation]

**Sc√©nario 2 : Formulaire "Pr√©voyance"**
- Formulaire #1 Pr√©voyance ‚Üí prevoyance1@entreprise.fr + direction@ (CC)
- Formulaire #2 Pr√©voyance ‚Üí prevoyance2@entreprise.fr + direction@ (CC)
- Formulaire #3 Pr√©voyance ‚Üí prevoyance1@entreprise.fr + direction@ (CC) [rotation]

**Sc√©nario 3 : Formulaire "Retraite"**
- Formulaire #1 Retraite ‚Üí retraite1@entreprise.fr + direction@ (CC)
- Formulaire #2 Retraite ‚Üí retraite2@entreprise.fr + direction@ (CC)
- Formulaire #3 Retraite ‚Üí retraite3@entreprise.fr + direction@ (CC)
- Formulaire #4 Retraite ‚Üí retraite1@entreprise.fr + direction@ (CC) [rotation]

**Sc√©nario 4 : Formulaire sans s√©lection ou "Autre"**
- Formulaire ‚Üí contact@entreprise.fr + direction@ (CC) [fallback]

#### Avantages

- Chaque expert re√ßoit SEULEMENT les demandes de sa sp√©cialit√©
- Pas de perte de temps √† transf√©rer les emails
- R√©ponse plus rapide (l'expert comp√©tent traite directement)
- La direction garde la visibilit√© sur tout
- Aucune demande perdue (fallback configur√©)

#### Statistiques apr√®s 1 mois

Exemple avec 300 formulaires re√ßus :
- 120 demandes Sant√© ‚Üí 60 √† sante1@, 60 √† sante2@
- 80 demandes Pr√©voyance ‚Üí 40 √† prevoyance1@, 40 √† prevoyance2@
- 90 demandes Retraite ‚Üí 30 √† chaque retraite1/2/3@
- 10 demandes "Autre" ‚Üí contact@entreprise.fr

Direction a re√ßu 300 emails en CC (tous).

---

### Cas 3 : Support client avec archivage (Configuration mixte)

#### Contexte

**Entreprise :** √âditeur de logiciel SaaS avec √©quipe support

**Besoin :**
- 3 agents support traitent les tickets en rotation
- Tous les tickets doivent √™tre archiv√©s dans un CRM (via email)
- Pas de distinction par type de probl√®me (support g√©n√©raliste)

#### Configuration

**Form Filter Mode :** All forms

**Thematic Filter Mode :** Disabled

**Email Subject :** "Nouveau ticket support - [Client]"

**Email Addresses (liste principale) :**
- support-agent1@entreprise.fr
- support-agent2@entreprise.fr
- support-agent3@entreprise.fr

**CC Email Addresses :**
- crm-ingest-abc123@votrecrm.com (adresse d'ingestion automatique du CRM)

#### R√©sultat

**Ticket #1 soumis (lundi 9h00)**
‚Üí Envoy√© √† support-agent1@entreprise.fr
‚Üí Copie √† crm-ingest-abc123@votrecrm.com
‚Üí Le CRM cr√©e automatiquement un ticket #1 assign√© √† "Agent 1"

**Ticket #2 soumis (lundi 10h30)**
‚Üí Envoy√© √† support-agent2@entreprise.fr
‚Üí Copie √† crm-ingest-abc123@votrecrm.com
‚Üí Le CRM cr√©e automatiquement un ticket #2 assign√© √† "Agent 2"

**Ticket #3 soumis (lundi 14h00)**
‚Üí Envoy√© √† support-agent3@entreprise.fr
‚Üí Copie √† crm-ingest-abc123@votrecrm.com
‚Üí Le CRM cr√©e automatiquement un ticket #3 assign√© √† "Agent 3"

**Ticket #4 soumis (mardi 8h00)**
‚Üí Envoy√© √† support-agent1@entreprise.fr (rotation)
‚Üí Copie au CRM

#### Avantages

- Distribution √©quitable de la charge de travail support
- Synchronisation automatique avec le CRM (pas de saisie manuelle)
- Tra√ßabilit√© compl√®te de tous les tickets
- Reporting facilit√© (le CRM a tout l'historique)

#### Points de vigilance

**CRM configuration :**
- V√©rifiez que l'adresse d'ingestion du CRM est correcte
- Testez avec 1-2 tickets avant de mettre en production
- Certains CRM n√©cessitent un format d'email sp√©cifique (sujet, corps, etc.)

**Gestion des absences :**
Si un agent est absent pour 1 semaine, 2 solutions :
1. Le retirer temporairement de la rotation
2. Le laisser (ses tickets s'accumulent, il les traitera au retour)

---

### Cas 4 : Agence immobili√®re avec zones g√©ographiques

#### Contexte

**Entreprise :** Agence immobili√®re multi-sites

**Besoin :**
- Router les demandes selon la ville d'int√©r√™t
- Paris ‚Üí √©quipe Paris
- Lyon ‚Üí √©quipe Lyon
- Marseille ‚Üí √©quipe Marseille
- Autres villes ‚Üí agence principale

#### Configuration

**Champ Formidable :** "Ville d'int√©r√™t" (radio ou select)
- Paris
- Lyon
- Marseille
- Autre

**Thematic Filter Mode :** Enabled

**Thematic Field Selection :** Field ID 12 - "Ville d'int√©r√™t"

**Thematic Email Mappings :**

**Paris :**
- agent-paris1@agence.fr
- agent-paris2@agence.fr

**Lyon :**
- agent-lyon@agence.fr

**Marseille :**
- agent-marseille1@agence.fr
- agent-marseille2@agence.fr
- agent-marseille3@agence.fr

**Email Subject :** "Nouvelle demande immobili√®re"

**Email Addresses (liste principale) :**
- contact@agence.fr

**CC Email Addresses :** (vide)

#### R√©sultat

- Demandes Paris ‚Üí rotation entre paris1@ et paris2@
- Demandes Lyon ‚Üí toutes √† lyon@ (un seul agent)
- Demandes Marseille ‚Üí rotation entre marseille1/2/3@
- Demandes "Autre" ou villes non configur√©es ‚Üí contact@agence.fr

#### Avantages

- Routage g√©ographique intelligent
- Agents locaux r√©pondent aux clients locaux (meilleure connaissance du march√©)
- Aucune demande perdue gr√¢ce au fallback

---

### Cas 5 : Association avec b√©n√©voles multilingues

#### Contexte

**Organisation :** Association internationale

**Besoin :**
- Router les demandes selon la langue
- Fran√ßais ‚Üí b√©n√©voles francophones
- Anglais ‚Üí b√©n√©voles anglophones
- Espagnol ‚Üí b√©n√©voles hispanophones

#### Configuration

**Champ Formidable :** "Langue pr√©f√©r√©e" (radio)
- Fran√ßais
- English
- Espa√±ol

**Thematic Filter Mode :** Enabled

**Thematic Email Mappings :**

**Fran√ßais :**
- benevole-fr1@association.org
- benevole-fr2@association.org

**English :**
- volunteer-en1@association.org
- volunteer-en2@association.org

**Espa√±ol :**
- voluntario-es@association.org

**Email Subject :** "Nouvelle demande d'assistance"

**Liste principale (fallback) :**
- contact@association.org

**CC :**
- coordination@association.org (coordinateur g√©n√©ral)

#### R√©sultat

- Demandes en fran√ßais ‚Üí rotation fr1/fr2
- Demandes en anglais ‚Üí rotation en1/en2
- Demandes en espagnol ‚Üí voluntario-es (unique)
- Coordination re√ßoit tout pour supervision

---

## 8. D√âPANNAGE (TROUBLESHOOTING)

Cette section vous aide √† r√©soudre les probl√®mes les plus courants.

---

### Probl√®me 1 : Aucun email n'est envoy√©

#### Sympt√¥mes

- Vous soumettez un formulaire
- Le formulaire affiche "Merci" ou "Envoy√© avec succ√®s"
- Mais aucun email n'arrive dans aucune bo√Æte (ni destinataire principal, ni CC)

#### Causes possibles

**Cause A :** Aucune adresse email configur√©e dans le plugin

**Cause B :** WordPress ne peut pas envoyer d'emails (probl√®me serveur SMTP)

**Cause C :** Le plugin est d√©sactiv√©

**Cause D :** Votre formulaire Formidable est configur√© pour ne PAS d√©clencher les hooks (rare)

#### Solutions

**Solution A : V√©rifier la configuration du plugin**

1. Allez dans `Tableau de bord ‚Üí Sequential Submissions`
2. V√©rifiez que la section **"Email Addresses"** contient au moins une adresse
3. Si vide, ajoutez au moins une adresse
4. Cliquez sur "Enregistrer les modifications"
5. Testez √† nouveau

**Solution B : Tester l'envoi d'emails WordPress**

WordPress lui-m√™me peut avoir des probl√®mes d'envoi d'emails. Pour tester :

1. Installez le plugin "Check Email" ou "WP Mail SMTP"
2. Envoyez un email de test depuis ce plugin
3. Si l'email de test n'arrive pas, le probl√®me est WordPress, pas WP Rolling Mail

Solutions pour r√©parer l'envoi d'emails WordPress :
- Utilisez le plugin "WP Mail SMTP" pour configurer un serveur SMTP externe (Gmail, SendGrid, etc.)
- Contactez votre h√©bergeur pour activer la fonction mail() de PHP
- V√©rifiez que votre serveur n'est pas blacklist√©

**Solution C : V√©rifier que le plugin est activ√©**

1. Allez dans `Extensions ‚Üí Extensions install√©es`
2. Cherchez "Formidable Sequential Submissions"
3. Si "D√©sactiver" est affich√©, le plugin est actif (OK)
4. Si "Activer" est affich√©, cliquez dessus pour l'activer

**Solution D : Consulter les logs**

Activez le mode debug de WordPress pour voir les erreurs :

1. √âditez le fichier `wp-config.php` (via FTP ou gestionnaire de fichiers de l'h√©bergeur)
2. Cherchez la ligne `define('WP_DEBUG', false);`
3. Remplacez par :
```php
define('WP_DEBUG', true);
define('WP_DEBUG_LOG', true);
define('WP_DEBUG_DISPLAY', false);
```
4. Sauvegardez le fichier
5. Soumettez un nouveau formulaire
6. Consultez le fichier `/wp-content/debug.log`
7. Cherchez les lignes commen√ßant par `[FSS]`

Exemple de log normal :
```
[FSS] === START Processing Entry 123 from Form 3 ===
[FSS] No thematic field configured, using main rotation
[FSS] Using main rotation list (3 addresses)
[FSS] Selected email: commercial1@entreprise.fr
[FSS] ‚úì Email sent successfully
[FSS] === END Processing Entry 123 ===
```

Si vous voyez :
```
[FSS] CRITICAL ERROR: No valid email addresses configured
```
‚Üí Ajoutez des adresses dans la configuration

---

### Probl√®me 2 : Tous les emails vont au m√™me destinataire

#### Sympt√¥mes

- Vous avez configur√© 3 adresses : alice@, bob@, claire@
- Vous soumettez 5 formulaires
- Tous les 5 emails arrivent √† alice@
- Bob et Claire ne re√ßoivent rien

#### Causes possibles

**Cause A :** Vous n'avez qu'un seul email dans la liste (typo ? oubli ?)

**Cause B :** L'index de rotation est bloqu√© (bug base de donn√©es)

**Cause C :** Vous testez trop vite (emails group√©s)

#### Solutions

**Solution A : V√©rifier le nombre d'adresses**

1. Allez dans `Tableau de bord ‚Üí Sequential Submissions`
2. Section "Email Addresses"
3. Comptez combien d'adresses sont affich√©es
4. Si vous n'en voyez qu'une, ajoutez les autres
5. Sauvegardez

**Solution B : R√©initialiser la rotation**

Pour forcer la rotation √† red√©marrer :

1. Notez vos adresses actuelles (copiez-les quelque part)
2. Supprimez toutes les adresses (ic√¥ne üóë)
3. Sauvegardez (liste vide)
4. Rajoutez les adresses une par une
5. Sauvegardez √† nouveau
6. Testez

**Solution C : V√©rifier les logs**

Activez WP_DEBUG et consultez debug.log :

```
[FSS] Current rotation index: 0 (total addresses: 3)
[FSS] Selected email: alice@entreprise.fr
[FSS] New rotation index: 0
```

Si vous voyez toujours "index: 0" apr√®s plusieurs soumissions, c'est que la rotation ne s'incr√©mente pas.

Dans ce cas :
1. V√©rifiez que les emails sont bien ENVOY√âS (pas juste s√©lectionn√©s)
2. Cherchez des erreurs WordPress (permissions base de donn√©es ?)
3. Contactez le support technique avec les logs

**Solution D : Tester en espa√ßant les soumissions**

Parfois, si vous soumettez 3 formulaires en 10 secondes, votre serveur mail peut les grouper.

Essayez :
1. Soumettez 1 formulaire
2. Attendez 1 minute
3. V√©rifiez qui a re√ßu (alice)
4. Soumettez un 2√®me formulaire
5. Attendez 1 minute
6. V√©rifiez qui a re√ßu (doit √™tre bob)

---

### Probl√®me 3 : Le routage th√©matique ne fonctionne pas

#### Sympt√¥mes

- Vous avez configur√© le routage th√©matique
- Vous soumettez un formulaire avec "Sant√©"
- L'email va √† la liste principale au lieu d'aller √† sante@

#### Causes possibles

**Cause A :** Le champ th√©matique s√©lectionn√© n'est pas le bon

**Cause B :** Le champ a √©t√© supprim√© de Formidable Forms

**Cause C :** Les valeurs du formulaire ne correspondent pas exactement

**Cause D :** Le mode th√©matique est sur "Disabled"

#### Solutions

**Solution A : V√©rifier le champ s√©lectionn√©**

1. Allez dans `Formidable ‚Üí Formulaires`
2. √âditez votre formulaire
3. Identifiez quel champ contient les valeurs "Sant√©", "Pr√©voyance", etc.
4. Notez son Field ID (par exemple : 8)
5. Allez dans `Sequential Submissions ‚Üí Thematic Field Selection`
6. V√©rifiez que le champ s√©lectionn√© correspond bien √† l'ID not√©

**Solution B : V√©rifier que le champ existe**

Si vous avez supprim√© ou modifi√© le champ dans Formidable :

1. Consultez les logs (debug.log)
2. Cherchez :
```
[FSS] WARNING: Configured thematic field ID 8 does not exist in Formidable Forms
[FSS] Falling back to main rotation list
```

Si vous voyez ce message :
1. Le champ ID 8 n'existe plus
2. Recr√©ez le champ dans Formidable OU
3. S√©lectionnez un autre champ dans la configuration

**Solution C : V√©rifier la correspondance des valeurs**

C'est la cause la plus fr√©quente.

**Exemple de probl√®me :**

Dans Formidable, votre champ radio a la valeur :
```
Mutuelle / Sant√©
```

Mais dans WP Rolling Mail, vous voyez un bloc nomm√© :
```
Sant√© / Mutuelle
```

Ces deux valeurs sont DIFF√âRENTES pour l'ordinateur. Le routage ne fonctionnera pas.

**Comment v√©rifier :**

1. Consultez les logs apr√®s soumission :
```
[FSS] Raw thematic value: 'Mutuelle / Sant√©'
[FSS] Normalized thematic key: 'mutuelle_sante'
[FSS] Thematic email list 'mutuelle_sante' has 0 addresses
[FSS] Falling back to main rotation list
```

Vous voyez que la cl√© normalis√©e est `mutuelle_sante`, mais dans votre configuration, vous avez peut-√™tre configur√© `sante_mutuelle`.

**Solution :**

1. Soumettez AU MOINS UN formulaire avec chaque option (Sant√©, Pr√©voyance, Retraite)
2. Retournez dans `Sequential Submissions`
3. La section "Thematic Email Mappings" affichera les VRAIES valeurs d√©tect√©es
4. Configurez les emails pour ces valeurs exactes

**Solution D : Activer le mode th√©matique**

1. V√©rifiez que **"Thematic Filter Mode"** est sur **"Enabled"**
2. Si c'est sur "Disabled", le plugin ignore compl√®tement le champ th√©matique
3. Changez pour "Enabled" et sauvegardez

---

### Probl√®me 4 : Comment voir ce qui se passe en d√©tail ?

#### Objectif

Vous voulez comprendre exactement ce qui se passe lors de chaque soumission de formulaire pour diagnostiquer un probl√®me complexe.

#### Solution : Activer les logs de debug

Les logs sont des fichiers texte qui enregistrent tout ce que fait le plugin.

**√âtape 1 : Activer WP_DEBUG**

1. Connectez-vous √† votre h√©bergement (via FTP, cPanel, ou gestionnaire de fichiers)
2. Localisez le fichier `wp-config.php` √† la racine de WordPress
3. √âditez ce fichier
4. Cherchez cette ligne :
```php
define('WP_DEBUG', false);
```
5. Remplacez par ces 3 lignes :
```php
define('WP_DEBUG', true);
define('WP_DEBUG_LOG', true);
define('WP_DEBUG_DISPLAY', false);
```
6. Sauvegardez le fichier

**Important :** `WP_DEBUG_DISPLAY` DOIT √™tre sur `false` pour √©viter d'afficher les erreurs sur votre site public.

**√âtape 2 : Soumettre un formulaire**

1. Allez sur votre formulaire
2. Remplissez-le avec des donn√©es de test
3. Soumettez-le

**√âtape 3 : Consulter les logs**

1. Retournez dans votre gestionnaire de fichiers
2. Naviguez vers `/wp-content/debug.log`
3. T√©l√©chargez ce fichier OU ouvrez-le dans un √©diteur de texte

**√âtape 4 : Chercher les lignes [FSS]**

Le plugin WP Rolling Mail pr√©fixe tous ses messages par `[FSS]` (Formidable Sequential Submissions).

Utilisez la fonction "Rechercher" (Ctrl+F) de votre √©diteur et cherchez `[FSS]`.

**Exemple de log r√©ussi (rotation simple) :**

```
[FSS] === START Processing Entry 123 from Form 3 ===
[FSS] Form 3 | Entry 123 | Rotation: YES | Reason: Form included by filter settings
[FSS] No thematic field configured, using main rotation
[FSS] Current rotation index: 0 (total addresses: 3)
[FSS] Selected email: commercial1@entreprise.fr
[FSS] New rotation index: 0
[FSS] No CC recipients configured
[FSS] Building email with subject: 'Nouvelle demande de contact'
[FSS] Message body length: 245 characters
[FSS] Sending email to: commercial1@entreprise.fr
[FSS] ‚úì Email sent successfully
[FSS] Updated main rotation index: 0
[FSS] === END Processing Entry 123 ===
```

**Exemple de log r√©ussi (routage th√©matique) :**

```
[FSS] === START Processing Entry 456 from Form 3 ===
[FSS] Form 3 | Entry 456 | Rotation: YES
[FSS] Thematic field ID configured: 8
[FSS] Raw thematic value: 'Pr√©voyance'
[FSS] Normalized thematic key: 'prevoyance'
[FSS] Thematic email list 'prevoyance' has 2 addresses
[FSS] Current rotation index: 0 (total addresses: 2)
[FSS] Selected email: prevoyance1@entreprise.fr
[FSS] Adding 1 CC recipients: direction@entreprise.fr
[FSS] Building email with subject: 'Nouvelle demande'
[FSS] Sending email to: prevoyance1@entreprise.fr (+ 1 CC)
[FSS] ‚úì Email sent successfully
[FSS] Updated thematic rotation index for 'prevoyance': 0
[FSS] === END Processing Entry 456 ===
```

**Exemple de log avec probl√®me (email invalide) :**

```
[FSS] === START Processing Entry 789 from Form 3 ===
[FSS] WARNING: Invalid email address removed from main/thematic rotation list: 'commercial1@entreprisefr'
[FSS] 1 invalid email(s) removed from main/thematic rotation list
[FSS] Using main rotation (2 addresses)
[FSS] Selected email: commercial2@entreprise.fr
[FSS] ‚úì Email sent successfully
[FSS] === END Processing Entry 789 ===
```

**Exemple de log avec erreur critique (aucun email configur√©) :**

```
[FSS] === START Processing Entry 999 from Form 3 ===
[FSS] CRITICAL ERROR: No valid email addresses configured anywhere (neither thematic nor main)
[FSS] Cannot send email for entry 999. Please configure at least one valid email address.
[FSS] === END Processing Entry 999 ===
```

#### Interpr√©ter les logs

**Signes de bon fonctionnement :**
- Vous voyez `‚úì Email sent successfully`
- L'email s√©lectionn√© correspond √† vos attentes
- L'index de rotation change entre les soumissions

**Signes de probl√®me :**
- Vous voyez `CRITICAL ERROR`
- Vous voyez `WARNING: Invalid email`
- Vous voyez `Falling back to main rotation list` alors que vous attendiez un routage th√©matique
- Vous ne voyez AUCUNE ligne `[FSS]` (le plugin ne s'ex√©cute pas du tout)

#### D√©sactiver les logs apr√®s diagnostic

Une fois votre probl√®me r√©solu, pensez √† d√©sactiver les logs :

1. R√©√©ditez `wp-config.php`
2. Remettez :
```php
define('WP_DEBUG', false);
```
3. Sauvegardez

Les logs peuvent grossir rapidement et ralentir votre site si laiss√©s activ√©s en permanence.

---

### Probl√®me 5 : Les emails arrivent en spam

#### Sympt√¥mes

- Les emails sont bien envoy√©s (vous voyez `‚úì Email sent successfully` dans les logs)
- Mais les destinataires ne les voient pas dans leur bo√Æte de r√©ception
- Ils sont dans le dossier Spam/Ind√©sirables

#### Causes possibles

**Cause A :** Votre serveur WordPress envoie les emails sans authentification SMTP

**Cause B :** Votre domaine n'a pas de records SPF/DKIM configur√©s

**Cause C :** L'adresse exp√©ditrice est suspecte (ex: wordpress@votredomaine.com)

#### Solutions

**Solution A : Utiliser un service SMTP professionnel**

Au lieu de laisser WordPress envoyer les emails directement (fonction PHP mail()), utilisez un service SMTP :

1. Installez le plugin **WP Mail SMTP**
2. Configurez-le avec un service fiable :
   - **SendGrid** (gratuit jusqu'√† 100 emails/jour)
   - **Mailgun** (gratuit jusqu'√† 5000 emails/mois)
   - **Gmail SMTP** (si vous avez un compte G Suite / Google Workspace)
   - **Amazon SES** (tr√®s bon taux de d√©livrabilit√©)
3. Testez l'envoi depuis WP Mail SMTP
4. Une fois configur√©, WP Rolling Mail utilisera automatiquement ce service

**Solution B : Configurer SPF et DKIM**

Ces param√®tres DNS prouvent que vous √™tes bien le propri√©taire du domaine qui envoie les emails.

1. Contactez votre h√©bergeur ou votre service SMTP
2. Demandez les enregistrements SPF et DKIM √† ajouter
3. Ajoutez-les dans votre zone DNS (souvent via le panel de votre h√©bergeur)
4. Attendez 24-48h pour la propagation

**Solution C : Changer l'adresse exp√©ditrice**

Par d√©faut, WordPress envoie depuis `wordpress@votredomaine.com`, ce qui peut √™tre suspect.

Changez-la pour une adresse professionnelle :

1. Utilisez le plugin **WP Mail SMTP** (section "From Email")
2. Changez pour : `noreply@votredomaine.com` ou `contact@votredomaine.com`
3. Sauvegardez

**Test de d√©livrabilit√© :**

Envoyez un email de test √† ces services pour v√©rifier votre score :
- https://www.mail-tester.com/
- Score souhait√© : 8/10 ou plus

---

### Probl√®me 6 : La rotation ne semble pas √©quitable sur le long terme

#### Sympt√¥mes

- Apr√®s 90 soumissions entre 3 adresses
- Vous vous attendez √† : 30 / 30 / 30
- Vous obtenez : 35 / 28 / 27

#### Causes possibles

**Cause A :** Certains emails ont √©chou√© et n'ont pas incr√©ment√© l'index

**Cause B :** La configuration a √©t√© modifi√©e en cours de route (adresse ajout√©e/supprim√©e)

**Cause C :** Attentes irr√©alistes (la distribution est √©quitable √† long terme, pas parfaite √† chaque instant)

#### Explication

Le plugin garantit une distribution s√©quentielle stricte : A ‚Üí B ‚Üí C ‚Üí A ‚Üí B ‚Üí C...

Mais plusieurs facteurs peuvent cr√©er des petites variations :

**Facteur 1 : √âchecs d'envoi**

Si un email vers bob@entreprise.fr √©choue (serveur mail down), le plugin ne l'envoie PAS et ne compte PAS cette soumission pour Bob. La prochaine ira √† nouveau √† Bob (retry automatique).

R√©sultat : Bob re√ßoit 1 de moins.

**Facteur 2 : Modifications de configuration**

Si vous aviez 3 adresses (A, B, C) et que vous retirez B en cours de route, la rotation devient A ‚Üí C ‚Üí A ‚Üí C, ce qui cr√©e un d√©s√©quilibre par rapport aux stats pr√©c√©dentes.

**Facteur 3 : Rotation par th√©matique**

Si vous utilisez le routage th√©matique, chaque liste tourne IND√âPENDAMMENT.

Exemple :
- Liste Sant√© : alice@ et bob@
- Liste Retraite : claire@ seule

Sur 100 formulaires :
- 50 Sant√© ‚Üí 25 alice, 25 bob
- 50 Retraite ‚Üí 50 claire

R√©sultat total : alice 25, bob 25, claire 50. C'est NORMAL, car claire est seule sur sa liste.

#### Solution

**Pour une distribution parfaitement √©quitable :**

1. Utilisez une rotation simple (pas de th√©matique)
2. N'ajoutez/supprimez JAMAIS d'adresses en cours d'utilisation
3. Surveillez les √©checs d'envoi (logs)
4. Acceptez les petites variations (29/31/30 sur 90 est normal)

**Sur le long terme (1000+ soumissions), la distribution s'√©quilibre naturellement.**

Si apr√®s 1000 soumissions vous avez 400/300/300, il y a un bug. Contactez le support avec les logs.

---

## 9. BONNES PRATIQUES

### Recommandations

#### 1. Toujours configurer une liste de fallback (Email Addresses)

**Pourquoi ?**
La liste principale (fallback) est votre filet de s√©curit√©. M√™me si vous utilisez le routage th√©matique, gardez au moins une adresse dans cette liste.

**Cas o√π le fallback est utilis√© :**
- Formulaire soumis sans champ th√©matique rempli
- Nouvelle valeur apparue que vous n'avez pas encore configur√©e
- Champ th√©matique supprim√© par erreur de Formidable
- Liste th√©matique configur√©e mais vide

**Recommandation :**
```
Liste principale : contact@entreprise.fr
ou
Liste principale : direction@entreprise.fr
```

Choisissez une adresse qui :
- Est surveill√©e quotidiennement
- Peut traiter tous types de demandes
- Ne part jamais en cong√© (adresse g√©n√©rique, pas personnelle)

---

#### 2. Tester avec de vrais emails avant mise en production

**Pourquoi ?**
Mieux vaut d√©tecter les probl√®mes AVANT que les vrais clients soient impact√©s.

**Comment tester efficacement :**

**Phase 1 : Test en local**
1. Utilisez vos propres adresses email personnelles (Gmail, Outlook, etc.)
2. Configurez 3 adresses : votre-email+1@gmail.com, votre-email+2@gmail.com, votre-email+3@gmail.com
3. Soumettez 10 formulaires
4. V√©rifiez que vous recevez bien les emails (regardez dans Spam aussi)

**Phase 2 : Test avec les vraies adresses**
1. Configurez les vraies adresses de vos coll√®gues
2. Pr√©venez-les qu'ils vont recevoir des tests
3. Soumettez 5-10 formulaires de test
4. Demandez confirmation de r√©ception √† chacun

**Phase 3 : Test en production avec surveillance**
1. Mettez en production
2. Surveillez les logs pendant 48h (activez WP_DEBUG temporairement)
3. Demandez un retour √† vos coll√®gues apr√®s 1 semaine

**Checklist de test :**
- ‚úÖ Rotation simple fonctionne (si applicable)
- ‚úÖ Routage th√©matique fonctionne (si applicable)
- ‚úÖ Fallback fonctionne (testez en laissant le champ vide)
- ‚úÖ CC re√ßoivent tout (si applicable)
- ‚úÖ Emails n'arrivent pas en spam
- ‚úÖ Sujet d'email correct
- ‚úÖ Contenu du formulaire complet dans l'email

---

#### 3. Documenter votre configuration

**Pourquoi ?**
Dans 6 mois, vous aurez peut-√™tre oubli√© pourquoi telle adresse est configur√©e. Si un coll√®gue reprend la gestion, il sera perdu.

**Ce qu'il faut documenter :**

**Exemple de documentation (dans un fichier Word/Google Doc) :**

```
=== CONFIGURATION WP ROLLING MAIL ===
Derni√®re mise √† jour : 15 mars 2024
Responsable : Sophie Dubois

--- ROTATION G√âN√âRALE ---
Mode : Routage th√©matique activ√©
Champ utilis√© : Field ID 8 - "Type de demande"

--- √âQUIPE SANT√â ---
Emails : sante1@entreprise.fr (Marie Martin)
         sante2@entreprise.fr (Luc Dupont)
Quand : Formulaires avec "Sant√© / Mutuelle" s√©lectionn√©

--- √âQUIPE PR√âVOYANCE ---
Emails : prevoyance@entreprise.fr (bo√Æte partag√©e - Pierre & Julie)
Quand : Formulaires avec "Pr√©voyance" s√©lectionn√©

--- √âQUIPE RETRAITE ---
Emails : retraite1@entreprise.fr (Jean Durand)
         retraite2@entreprise.fr (Claire Lefebvre)
         retraite3@entreprise.fr (Thomas Rousseau)
Quand : Formulaires avec "√âpargne Retraite" s√©lectionn√©

--- FALLBACK ---
Email : contact@entreprise.fr
Utilis√© si : valeur non reconnue ou champ vide

--- CC ---
Email : direction@entreprise.fr (Directrice g√©n√©rale Anne Petit)
Raison : Supervision de tous les leads

--- NOTES ---
- Si Marie part en cong√©, retirer temporairement sante1@
- La bo√Æte prevoyance@ est g√©r√©e par Pierre ET Julie (pas besoin de rotation)
- Thomas (retraite3@) est nouveau depuis janvier 2024
```

**O√π stocker cette documentation ?**
- Google Drive partag√© avec l'√©quipe IT
- Confluence ou wiki interne
- Dans un dossier "Documentation WordPress" sur votre serveur

**Bonus :** Prenez une capture d'√©cran de la page de configuration et joignez-la au document.

---

#### 4. Surveiller les logs les premi√®res semaines

**Pourquoi ?**
Les premi√®res semaines de production sont critiques. Vous pouvez d√©tecter :
- Des probl√®mes de d√©livrabilit√©
- Des erreurs de configuration que vous n'aviez pas anticip√©es
- Des cas d'usage non pr√©vus

**Comment faire :**

**Semaine 1 : Surveillance active**
1. Activez WP_DEBUG (voir section D√©pannage)
2. Consultez debug.log tous les jours
3. Cherchez les lignes `[FSS]`
4. V√©rifiez qu'il y a des `‚úì Email sent successfully`
5. V√©rifiez qu'il n'y a pas de `CRITICAL ERROR` ou trop de `WARNING`

**Semaine 2-4 : Surveillance passive**
1. Consultez les logs 2 fois par semaine
2. Demandez du feedback aux destinataires ("Recevez-vous bien les formulaires ?")

**Apr√®s 1 mois : D√©sactivation des logs**
1. Si tout fonctionne bien, d√©sactivez WP_DEBUG
2. Gardez quand m√™me votre documentation √† jour
3. R√©activez les logs seulement en cas de probl√®me

**Que surveiller dans les logs :**

**Bon signe :**
```
[FSS] ‚úì Email sent successfully
```
‚Üí Tout va bien

**Signe d'alerte :**
```
[FSS] WARNING: Invalid email address removed
```
‚Üí Vous avez une typo dans une adresse

**Signe critique :**
```
[FSS] CRITICAL ERROR: No valid email addresses configured
```
‚Üí Aucun email ne peut √™tre envoy√©, agissez imm√©diatement

---

#### 5. Utiliser des adresses email d√©di√©es plut√¥t que personnelles

**Pourquoi ?**

**Probl√®me avec adresses personnelles :**
```
marie.martin@entreprise.fr (adresse personnelle de Marie)
```

**Risques :**
- Marie part en cong√© 3 semaines ‚Üí 1/3 des leads non trait√©s
- Marie quitte l'entreprise ‚Üí son adresse est d√©sactiv√©e ‚Üí emails perdus
- Marie change de poste ‚Üí faut reconfigurer tout le plugin

**Solution : Adresses g√©n√©riques/fonctionnelles**
```
equipe-sante@entreprise.fr (bo√Æte partag√©e)
ou
sante-leads@entreprise.fr
ou
commercial-zone-nord@entreprise.fr
```

**Avantages :**
- Plusieurs personnes peuvent acc√©der √† la bo√Æte
- Si quelqu'un part, pas besoin de reconfigurer
- Continuit√© de service garantie
- Plus facile √† transf√©rer en cas de r√©organisation

**Comment cr√©er ces adresses :**

**Option A : Bo√Æte email partag√©e**
Cr√©ez une vraie bo√Æte mail que plusieurs personnes consultent (via webmail ou ajout du compte dans Outlook/Thunderbird)

**Option B : Alias avec redirection**
Cr√©ez un alias qui redirige vers 2-3 adresses personnelles :
```
equipe-sante@entreprise.fr ‚Üí marie@, luc@, pierre@
```

Tous les trois re√ßoivent les m√™mes emails (pas de rotation, mais redondance).

**Recommandation :**
- Rotation AU SEIN d'adresses g√©n√©riques : OK
- Rotation sur adresses personnelles directes : √Ä √©viter

Exemple optimal :
```
Liste Sant√© :
- sante-commercial-1@entreprise.fr (g√©r√© par Marie)
- sante-commercial-2@entreprise.fr (g√©r√© par Luc)
```

Si Luc part, vous assignez la bo√Æte sante-commercial-2@ √† son rempla√ßant. Pas besoin de toucher au plugin.

---

### Erreurs √† √©viter

#### 1. Ne pas configurer d'emails du tout

**Erreur :**
Activer le plugin sans ajouter aucune adresse dans "Email Addresses".

**Cons√©quence :**
Aucun email ne sera jamais envoy√©. Les formulaires seront soumis mais les donn√©es perdues.

**D√©tection :**
Les logs montreront :
```
[FSS] CRITICAL ERROR: No valid email addresses configured
```

**Solution :**
Ajoutez AU MOINS une adresse dans "Email Addresses" (liste principale).

---

#### 2. Oublier la liste de fallback en mode th√©matique

**Erreur :**
Activer le routage th√©matique, configurer les listes th√©matiques, mais laisser "Email Addresses" (liste principale) vide.

**Cons√©quence :**
Si une valeur inattendue arrive (nouveau type de demande, champ vide, erreur), aucun email de secours n'est disponible. Le formulaire est perdu.

**Exemple concret :**
Vous configurez :
- Sant√© ‚Üí sante@
- Retraite ‚Üí retraite@

Un utilisateur soumet avec "Pr√©voyance" (que vous aviez oubli√© de configurer).
‚Üí Si pas de fallback, email perdu.

**Solution :**
TOUJOURS mettre au moins 1 adresse dans "Email Addresses", m√™me en mode th√©matique.

---

#### 3. Utiliser des emails avec typos

**Erreur :**
Taper commercial1@entreprisefr (oubli du point avant "fr") au lieu de commercial1@entreprise.fr

**Cons√©quence :**
Le plugin d√©tecte que l'email est invalide et le retire automatiquement de la liste. Vous croyez avoir 3 adresses en rotation, mais en r√©alit√© il n'y en a que 2 (la 3√®me est ignor√©e).

**D√©tection :**
Les logs montreront :
```
[FSS] WARNING: Invalid email address removed from main/thematic rotation list: 'commercial1@entreprisefr'
```

**Solution :**
- Copiez-collez les adresses depuis votre annuaire d'entreprise plut√¥t que de les taper
- Apr√®s configuration, envoyez un email de test √† chaque adresse pour v√©rifier
- Surveillez les logs la premi√®re semaine

---

#### 4. Changer le Field ID sans reconfigurer

**Erreur :**
Vous aviez configur√© Field ID 8 pour le routage th√©matique. Vous modifiez votre formulaire Formidable et vous supprimez ce champ. Vous cr√©ez un nouveau champ similaire qui a maintenant l'ID 12. Vous oubliez de mettre √† jour la configuration du plugin.

**Cons√©quence :**
Le plugin cherche toujours le Field ID 8 qui n'existe plus. Il ne trouve rien et bascule syst√©matiquement sur le fallback.

**D√©tection :**
Les logs montreront :
```
[FSS] WARNING: Configured thematic field ID 8 does not exist in Formidable Forms
[FSS] Falling back to main rotation list
```

**Solution :**
- √âvitez de supprimer des champs dans Formidable si possible (modifiez-les plut√¥t)
- Si vous devez supprimer, notez le nouvel ID du champ de remplacement
- Retournez dans la config du plugin et s√©lectionnez le nouveau champ
- Sauvegardez
- La page recharge et affiche les nouvelles valeurs

**Bonne pratique :**
Avant de modifier un formulaire Formidable, v√©rifiez si ce formulaire est utilis√© par WP Rolling Mail. Si oui, notez le Field ID actuel et v√©rifiez-le apr√®s modification.

---

## 10. FAQ (FOIRE AUX QUESTIONS)

### Q : Combien d'emails puis-je ajouter dans une liste ?

**R :** Il n'y a pas de limite technique impos√©e par le plugin. Vous pouvez ajouter 3, 10, 50 ou 100 adresses si vous le souhaitez.

**Limites pratiques :**
- **10-20 emails maximum recommand√©** pour des raisons de gestion
- Au-del√† de 20, la rotation devient tr√®s lente (chaque adresse ne re√ßoit qu'un email tous les 20+ formulaires)
- Plus il y a d'adresses, plus il est difficile de g√©rer les absences/d√©parts

**Exemple de probl√®me avec trop d'adresses :**
Si vous avez 50 commerciaux en rotation et recevez 10 leads par jour, chaque commercial recevra 1 lead tous les 5 jours. Autant faire 5 listes de 10 personnes avec routage th√©matique ou g√©ographique.

**Recommandation :**
- Rotation simple : 3-10 adresses max
- Rotation th√©matique : 2-5 adresses par th√©matique

---

### Q : Puis-je utiliser le m√™me email dans plusieurs listes ?

**R :** Oui, absolument. Une m√™me adresse peut appara√Ætre dans :
- La liste principale
- Une ou plusieurs listes th√©matiques
- Les CC

**Exemple valide :**
```
Liste principale : contact@entreprise.fr, commercial1@entreprise.fr
Liste Sant√© : commercial1@entreprise.fr, sante@entreprise.fr
CC : direction@entreprise.fr
```

Dans cet exemple, commercial1@entreprise.fr peut recevoir :
- Des emails de la rotation principale (quand pas de th√©matique)
- Des emails de la rotation Sant√© (quand th√©matique = Sant√©)

**Cas d'usage :**
Vous avez un commercial polyvalent (Alice) qui peut traiter tous types de demandes, et des sp√©cialistes qui ne traitent qu'un type.

Configuration :
```
Liste principale : alice@, bob@, claire@
Liste th√©matique "Sant√©" : alice@, sante-expert@
```

R√©sultat :
- Demandes sans th√©matique ‚Üí rotation entre alice, bob, claire
- Demandes "Sant√©" ‚Üí rotation entre alice et sante-expert
- Alice re√ßoit donc plus d'emails que les autres (elle est dans 2 listes)

---

### Q : Que se passe-t-il si je supprime un champ Formidable configur√© ?

**R :** Si vous supprimez le champ th√©matique (par exemple Field ID 8) de votre formulaire Formidable, le plugin d√©tecte l'erreur et bascule automatiquement sur la liste principale (fallback).

**Ce qui se passe techniquement :**
1. Un formulaire est soumis
2. Le plugin essaie de lire le Field ID 8
3. Il ne le trouve pas dans Formidable
4. Il logue un WARNING dans debug.log :
```
[FSS] WARNING: Configured thematic field ID 8 does not exist
[FSS] Falling back to main rotation list
```
5. Il envoie l'email √† la liste principale

**Cons√©quence :**
- Aucun email n'est perdu (gr√¢ce au fallback)
- Mais le routage th√©matique cesse de fonctionner
- Tous les formulaires vont √† la liste principale

**Solution :**
1. Si vous avez supprim√© le champ par erreur, recr√©ez-le (il aura un nouvel ID)
2. Allez dans la config du plugin
3. S√©lectionnez le nouveau champ
4. Sauvegardez
5. Reconfigurez les listes th√©matiques si n√©cessaire (si les valeurs ont chang√©)

**Bonne pratique :**
Avant de supprimer un champ dans Formidable, v√©rifiez s'il est utilis√© par le plugin (regardez la configuration).

---

### Q : Les emails sont-ils envoy√©s imm√©diatement ?

**R :** Oui, les emails sont envoy√©s imm√©diatement lors de la soumission du formulaire.

**Chronologie exacte :**
1. Utilisateur clique sur "Envoyer" dans le formulaire
2. Formidable Forms traite la soumission
3. Formidable d√©clenche le hook `frm_after_create_entry`
4. WP Rolling Mail intercepte ce hook (en quelques millisecondes)
5. WP Rolling Mail s√©lectionne le destinataire selon la rotation
6. WP Rolling Mail appelle `wp_mail()` pour envoyer l'email
7. WordPress/PHP envoie l'email via SMTP ou fonction mail()
8. L'utilisateur voit le message "Merci, votre formulaire a √©t√© envoy√©"

**D√©lai total typique :**
- Entre la soumission et l'envoi : < 1 seconde
- Entre l'envoi et la r√©ception : d√©pend du serveur mail (g√©n√©ralement 0-30 secondes)

**D√©lai de r√©ception peut varier selon :**
- Votre serveur SMTP (SendGrid, Mailgun = rapide ; serveur PHP mail() = plus lent)
- Le serveur de r√©ception (Gmail est rapide, certains serveurs d'entreprise peuvent prendre plusieurs minutes)
- Les filtres antispam interm√©diaires

**Pas de file d'attente / cron :**
Le plugin n'utilise PAS de syst√®me de file d'attente diff√©r√©e. L'envoi est synchrone et imm√©diat. Si `wp_mail()` √©choue, l'email n'est pas mis en attente pour retry plus tard.

---

### Q : Puis-je voir l'historique des emails envoy√©s ?

**R :** Le plugin lui-m√™me ne stocke pas d'historique des emails envoy√©s. Cependant, il existe plusieurs solutions pour tracer les envois :

**Solution 1 : Logs de debug (temporaire)**
1. Activez WP_DEBUG (voir section D√©pannage)
2. Consultez `/wp-content/debug.log`
3. Cherchez les lignes `[FSS]`
4. Vous verrez tous les envois avec :
   - ID de l'entr√©e
   - Email s√©lectionn√©
   - Th√©matique d√©tect√©e
   - R√©sultat de l'envoi (succ√®s/√©chec)

**Limite :** Les logs sont √©cras√©s r√©guli√®rement et ne sont pas un archivage permanent.

**Solution 2 : Plugin d'archivage d'emails**
Installez un plugin WordPress comme :
- **WP Mail Logging** (gratuit)
- **Mail Log** (gratuit)
- **WP Mail SMTP** (version Pro a un log int√©gr√©)

Ces plugins interceptent TOUS les emails envoy√©s par WordPress et les stockent dans la base de donn√©es. Vous pouvez voir :
- Date/heure d'envoi
- Destinataire
- Sujet
- Contenu de l'email
- Statut (envoy√©/√©chou√©)

**Solution 3 : Utiliser une adresse CC d'archivage**
Configurez une adresse CC d√©di√©e √† l'archivage (par exemple : archive@entreprise.fr). Tous les formulaires seront archiv√©s dans cette bo√Æte mail.

Avantage : Vous avez un historique consultable directement dans votre client mail (Outlook, Gmail, etc.).

**Solution 4 : Consulter les entr√©es Formidable**
Formidable Forms garde toutes les soumissions dans `Formidable ‚Üí Entr√©es`.

Vous ne verrez pas directement "√† qui l'email a √©t√© envoy√©", mais vous pouvez :
- Voir toutes les soumissions avec date/heure
- D√©duire la rotation (entr√©e 1 ‚Üí commercial1, entr√©e 2 ‚Üí commercial2, etc.)

**Recommandation :**
Pour un archivage permanent, utilisez une combinaison :
- Plugin WP Mail Logging (pour voir l'historique technique)
- Adresse CC d'archivage (pour avoir les emails complets)

---

### Q : Comment d√©sactiver temporairement le plugin ?

**R :** Il y a 2 fa√ßons de d√©sactiver le plugin selon votre besoin :

**M√©thode 1 : D√©sactivation compl√®te (le plugin ne s'ex√©cute plus du tout)**

1. Allez dans `Extensions ‚Üí Extensions install√©es`
2. Cherchez "Formidable Sequential Submissions"
3. Cliquez sur "D√©sactiver"

**Effet :**
- Le plugin cesse compl√®tement de fonctionner
- Les formulaires Formidable continuent de fonctionner normalement
- Mais ils utilisent les param√®tres d'envoi d'email de Formidable (notifications configur√©es dans Formidable Forms)

**Quand utiliser :**
- Vous voulez retourner au comportement par d√©faut de Formidable (tous les emails vont au m√™me destinataire configur√© dans Formidable)
- Vous suspectez un bug et voulez tester sans le plugin

---

**M√©thode 2 : D√©sactivation partielle (exclure certains formulaires)**

Si vous voulez que CERTAINS formulaires utilisent la rotation et d'autres non :

1. Allez dans `Sequential Submissions`
2. Section "Form Filter Mode"
3. S√©lectionnez "Disable rotation for selected forms"
4. Cochez les formulaires √† exclure
5. Sauvegardez

**Effet :**
- Les formulaires coch√©s n'utilisent PAS la rotation
- Les autres formulaires continuent d'utiliser la rotation
- Le plugin reste actif

**Quand utiliser :**
- Vous avez un formulaire de contact g√©n√©ral qui doit utiliser la rotation
- Et un formulaire "Recrutement" qui doit aller uniquement √† RH@

Configuration :
```
Form Filter Mode : Disable rotation for selected forms
‚òë Formulaire de recrutement (ID 5)
‚òê Formulaire de contact (ID 3)
```

R√©sultat :
- Formulaire de contact (3) ‚Üí utilise la rotation
- Formulaire de recrutement (5) ‚Üí utilise les param√®tres Formidable (notification configur√©e dans Formidable Forms, par exemple rh@entreprise.fr)

---

**M√©thode 3 : D√©sactivation temporaire d'un destinataire (cong√©, absence)**

Si un commercial part en cong√© et que vous ne voulez pas qu'il re√ßoive d'emails pendant 2 semaines :

1. Allez dans `Sequential Submissions`
2. Section "Email Addresses"
3. Cliquez sur l'ic√¥ne üóë √† droite de son adresse
4. Sauvegardez

**Effet :**
- La rotation continue avec les adresses restantes
- L'adresse supprim√©e ne re√ßoit plus rien

**Important :** Pensez √† RE-AJOUTER l'adresse au retour de la personne.

**Astuce :** Notez quelque part (dans un calendrier) la date de retour pour ne pas oublier de r√©activer l'adresse.

---

## 11. SUPPORT ET AIDE

### O√π obtenir de l'aide

Si apr√®s avoir lu ce guide vous rencontrez encore des difficult√©s, voici les ressources disponibles :

**1. Logs de debug**
Avant de demander de l'aide, activez TOUJOURS les logs (voir section 8.4) et consultez-les. Ils contiennent 90% des r√©ponses aux probl√®mes courants.

**2. Documentation WordPress et Formidable**
- Documentation officielle Formidable Forms : https://formidableforms.com/knowledgebase/
- Documentation WordPress : https://wordpress.org/support/

**3. Contact du d√©veloppeur**
Pour toute question technique sp√©cifique au plugin WP Rolling Mail :
- Email : support@kiora.tech (remplacer par l'adresse r√©elle)
- Indiquez toujours : version WordPress, version Formidable Forms, description du probl√®me, et copie des logs [FSS]

---

### Informations utiles √† fournir au support

Lorsque vous contactez le support, facilitez le diagnostic en fournissant :

**Informations syst√®me :**
```
Version WordPress : [ex: 6.4.2]
Version Formidable Forms : [ex: 6.7.1]
Version PHP : [ex: 8.2]
Plugin WP Rolling Mail actif : Oui/Non
```

**Configuration du plugin :**
Faites une capture d'√©cran de votre page de configuration (cachez les adresses email sensibles si besoin).

**Logs [FSS] :**
Copiez les derni√®res lignes des logs (section 8.4) en anonymisant les emails si n√©cessaire.

Exemple :
```
[FSS] === START Processing Entry 123 from Form 3 ===
[FSS] Thematic field ID configured: 8
[FSS] Raw thematic value: 'Sant√©'
[FSS] Normalized thematic key: 'sante'
[FSS] WARNING: Thematic list 'sante' is configured but empty
[FSS] Falling back to main rotation list (0 addresses)
[FSS] CRITICAL ERROR: No valid email addresses configured anywhere
[FSS] === END Processing Entry 123 ===
```

**Description pr√©cise du probl√®me :**
- **Comportement attendu :** "Je m'attends √† ce que le formulaire 'Sant√©' soit envoy√© √† sante1@ ou sante2@"
- **Comportement observ√© :** "Tous les formulaires vont √† contact@"
- **√âtapes pour reproduire :** "1. Je soumets un formulaire en s√©lectionnant 'Sant√©', 2. L'email arrive √† contact@ au lieu de sante@"

---

## 12. GLOSSAIRE

**Rotation** : Syst√®me de distribution automatique qui envoie chaque nouveau formulaire √† une adresse diff√©rente en suivant un ordre s√©quentiel (A ‚Üí B ‚Üí C ‚Üí A ‚Üí B ‚Üí C...). Garantit une distribution √©quitable √† long terme.

**Th√©matique** : Cat√©gorie ou type de demande bas√© sur une valeur de champ Formidable. Exemple : "Sant√©", "Pr√©voyance", "Retraite". Permet de router les formulaires vers des listes d'emails sp√©cialis√©es.

**Fallback (Liste principale)** : Liste d'emails de secours utilis√©e quand le routage th√©matique ne peut pas d√©terminer o√π envoyer un formulaire (champ vide, valeur non configur√©e, erreur). Aussi appel√©e "liste principale" ou "Email Addresses".

**CC (Copie Carbone)** : Adresse(s) email qui re√ßoivent une copie de TOUS les formulaires, quelle que soit la rotation ou la th√©matique. Utilis√© pour supervision, archivage ou int√©gration CRM.

**Field ID** : Identifiant num√©rique unique d'un champ dans Formidable Forms. Exemple : 8, 12, 45. Utilis√© par le plugin pour identifier quel champ contient la valeur th√©matique.

**Index (de rotation)** : Position actuelle dans la liste de rotation. Si la liste contient [alice@, bob@, claire@], l'index peut √™tre 0 (alice), 1 (bob) ou 2 (claire). Apr√®s chaque envoi, l'index avance (rotation).

**Normalized key (Cl√© normalis√©e)** : Version standardis√©e d'une valeur th√©matique. Exemple : "Sant√© / Mutuelle" devient "sante_mutuelle". Permet de regrouper des variantes similaires ("Sant√©", "Sant√© / Mutuelle", "Type : Sant√©") sous la m√™me cl√©.

**Formidable Forms** : Plugin WordPress de cr√©ation de formulaires avanc√©s. Pr√©requis pour utiliser WP Rolling Mail.

**wp_mail()** : Fonction WordPress utilis√©e pour envoyer des emails. Le plugin l'utilise pour l'envoi effectif des emails.

**SMTP (Simple Mail Transfer Protocol)** : Protocole standard d'envoi d'emails. Recommand√© d'utiliser un service SMTP externe (SendGrid, Mailgun) plut√¥t que la fonction PHP mail() native pour meilleure d√©livrabilit√©.

**WP_DEBUG** : Mode de debug de WordPress qui active les logs d'erreurs. Permet de diagnostiquer les probl√®mes en enregistrant toutes les actions du plugin dans `/wp-content/debug.log`.

**Hook (WordPress)** : Point d'accroche dans le code WordPress qui permet aux plugins d'intercepter des actions. WP Rolling Mail utilise le hook `frm_after_create_entry` de Formidable Forms pour intercepter les soumissions.

**Entry (Entr√©e)** : Une soumission de formulaire dans Formidable Forms. Chaque fois qu'un utilisateur soumet un formulaire, Formidable cr√©e une "entry" avec un ID unique.

**Sanitization** : Processus de nettoyage et validation des donn√©es (notamment emails) pour √©viter les erreurs et failles de s√©curit√©. Le plugin valide automatiquement toutes les adresses email configur√©es.

---

## ANNEXE : EXEMPLES DE LOGS

Cette section montre des exemples r√©els de logs pour vous aider √† comprendre ce qui se passe en coulisse.

---

### Log complet d'un envoi r√©ussi avec th√©matique

**Contexte :** Formulaire soumis avec valeur "Pr√©voyance", routage th√©matique activ√©, liste de 2 emails pour Pr√©voyance, 1 adresse en CC.

```
[FSS] === START Processing Entry 456 from Form 3 ===
[FSS] Form 3 | Entry 456 | Rotation: YES | Reason: Form included by filter settings
[FSS] Thematic field ID configured: 8
[FSS] Raw thematic value: 'Pr√©voyance'
[FSS] Normalized thematic key: 'prevoyance'
[FSS] Thematic email list 'prevoyance' has 2 addresses
[FSS] Current rotation index: 0 (total addresses: 2)
[FSS] Selected email: prevoyance1@entreprise.fr
[FSS] New rotation index: 0
[FSS] Adding 1 CC recipients: direction@entreprise.fr
[FSS] Building email with subject: 'Nouvelle demande d'information'
[FSS] Message body length: 342 characters
[FSS] Sending email to: prevoyance1@entreprise.fr (+ 1 CC)
[FSS] ‚úì Email sent successfully
[FSS] Updated thematic rotation index for 'prevoyance': 0
[FSS] === END Processing Entry 456 ===
```

**Interpr√©tation :**
- ‚úÖ Entr√©e 456 trait√©e avec succ√®s
- ‚úÖ Th√©matique d√©tect√©e : "Pr√©voyance" ‚Üí cl√© : prevoyance
- ‚úÖ Liste th√©matique utilis√©e (2 adresses disponibles)
- ‚úÖ Email envoy√© √† prevoyance1@entreprise.fr
- ‚úÖ CC envoy√© √† direction@entreprise.fr
- ‚úÖ Rotation mise √† jour (prochaine soumission ira √† prevoyance2@)

---

### Log d'un envoi r√©ussi avec rotation simple (sans th√©matique)

**Contexte :** Routage th√©matique d√©sactiv√©, liste principale de 3 emails, pas de CC.

```
[FSS] === START Processing Entry 789 from Form 3 ===
[FSS] Form 3 | Entry 789 | Rotation: YES | Reason: Form included by filter settings
[FSS] No thematic field configured, using main rotation
[FSS] Using main rotation list (3 addresses)
[FSS] Current rotation index: 0 (total addresses: 3)
[FSS] Selected email: commercial2@entreprise.fr
[FSS] New rotation index: 0
[FSS] No CC recipients configured
[FSS] Building email with subject: 'Nouveau formulaire de contact'
[FSS] Message body length: 198 characters
[FSS] Sending email to: commercial2@entreprise.fr
[FSS] ‚úì Email sent successfully
[FSS] Updated main rotation index: 0
[FSS] === END Processing Entry 789 ===
```

**Interpr√©tation :**
- ‚úÖ Configuration simple sans th√©matique
- ‚úÖ Utilisation de la liste principale (3 adresses)
- ‚úÖ Email envoy√© √† commercial2@ (c'√©tait son tour dans la rotation)
- ‚úÖ Pas de CC
- ‚úÖ Rotation mise √† jour

---

### Log avec fallback vers liste principale

**Contexte :** Routage th√©matique activ√©, mais la valeur soumise ("Automobile") n'a pas de liste d'emails configur√©e. Le plugin utilise le fallback.

```
[FSS] === START Processing Entry 1001 from Form 3 ===
[FSS] Form 3 | Entry 1001 | Rotation: YES
[FSS] Thematic field ID configured: 8
[FSS] Raw thematic value: 'Automobile'
[FSS] Normalized thematic key: 'automobile'
[FSS] WARNING: Thematic list 'automobile' is configured but empty
[FSS] Falling back to main rotation list (1 addresses)
[FSS] Current rotation index: 0 (total addresses: 1)
[FSS] Selected email: contact-general@entreprise.fr
[FSS] ‚úì Email sent successfully
[FSS] Updated main rotation index: 0
[FSS] === END Processing Entry 1001 ===
```

**Interpr√©tation :**
- ‚ö†Ô∏è Valeur "Automobile" d√©tect√©e mais non configur√©e
- ‚úÖ Fallback vers liste principale automatique
- ‚úÖ Email envoy√© √† contact-general@entreprise.fr
- üí° Action √† faire : Ajouter une liste d'emails pour "automobile" si cette valeur est fr√©quente

---

### Log avec d√©tection d'email invalide

**Contexte :** Une adresse email mal saisie (typo) est d√©tect√©e et retir√©e automatiquement.

```
[FSS] === START Processing Entry 555 from Form 3 ===
[FSS] Form 3 | Entry 555 | Rotation: YES
[FSS] No thematic field configured, using main rotation
[FSS] WARNING: Invalid email address removed from main/thematic rotation list: 'commercial1@entreprisefr'
[FSS] 1 invalid email(s) removed from main/thematic rotation list
[FSS] Using main rotation list (2 addresses)
[FSS] Current rotation index: 0 (total addresses: 2)
[FSS] Selected email: commercial2@entreprise.fr
[FSS] ‚úì Email sent successfully
[FSS] === END Processing Entry 555 ===
```

**Interpr√©tation :**
- ‚ö†Ô∏è Email invalide d√©tect√© : `commercial1@entreprisefr` (manque le `.`)
- ‚úÖ Email automatiquement retir√© de la rotation
- ‚úÖ Rotation continue avec les 2 adresses valides restantes
- üí° Action √† faire : Corriger la typo dans la configuration (commercial1@entreprise.fr)

---

### Log d'erreur critique - Aucun email configur√©

**Contexte :** Aucune adresse email n'est configur√©e nulle part (ni th√©matique ni principale).

```
[FSS] === START Processing Entry 666 from Form 3 ===
[FSS] Form 3 | Entry 666 | Rotation: YES
[FSS] Thematic field ID configured: 8
[FSS] Raw thematic value: 'Sant√©'
[FSS] Normalized thematic key: 'sante'
[FSS] WARNING: Thematic list 'sante' is configured but empty
[FSS] Falling back to main rotation list (0 addresses)
[FSS] CRITICAL ERROR: No valid email addresses configured anywhere (neither thematic nor main)
[FSS] Cannot send email for entry 666. Please configure at least one valid email address.
[FSS] === END Processing Entry 666 ===
```

**Interpr√©tation :**
- ‚ùå Aucun email envoy√©
- ‚ùå Liste th√©matique "sante" vide
- ‚ùå Liste principale √©galement vide
- üö® Action urgente : Ajouter au moins une adresse dans "Email Addresses"

---

### Log d'√©chec d'envoi email (probl√®me serveur)

**Contexte :** `wp_mail()` retourne false (√©chec d'envoi c√¥t√© serveur SMTP).

```
[FSS] === START Processing Entry 888 from Form 3 ===
[FSS] Form 3 | Entry 888 | Rotation: YES
[FSS] No thematic field configured, using main rotation
[FSS] Using main rotation list (3 addresses)
[FSS] Selected email: commercial1@entreprise.fr
[FSS] Building email with subject: 'Nouvelle demande'
[FSS] Sending email to: commercial1@entreprise.fr
[FSS] ‚úó CRITICAL: Email sending FAILED to commercial1@entreprise.fr
[FSS] Rotation index NOT incremented (will retry with same email on next submission)
[FSS] Possible causes: SMTP server down, incorrect email configuration, blocked by server
[FSS] === END Processing Entry 888 ===
```

**Interpr√©tation :**
- ‚ùå Email non envoy√© (probl√®me serveur)
- ‚úÖ L'index de rotation n'a PAS √©t√© incr√©ment√© (protection)
- ‚úÖ La prochaine soumission essaiera √† nouveau commercial1@ (retry automatique)
- üí° Action √† faire :
  - V√©rifier que WordPress peut envoyer des emails (tester avec un autre plugin)
  - V√©rifier la configuration SMTP
  - Contacter l'h√©bergeur si le probl√®me persiste

---

### Log avec champ th√©matique inexistant

**Contexte :** Le Field ID 8 configur√© n'existe plus dans Formidable (champ supprim√© par erreur).

```
[FSS] === START Processing Entry 999 from Form 3 ===
[FSS] Form 3 | Entry 999 | Rotation: YES
[FSS] Thematic field ID configured: 8
[FSS] WARNING: Configured thematic field ID 8 does not exist in Formidable Forms
[FSS] Falling back to main rotation list
[FSS] Please check your thematic field configuration and ensure the field still exists
[FSS] Using main rotation list (1 addresses)
[FSS] Selected email: contact@entreprise.fr
[FSS] ‚úì Email sent successfully
[FSS] === END Processing Entry 999 ===
```

**Interpr√©tation :**
- ‚ö†Ô∏è Champ th√©matique supprim√© ou ID incorrect
- ‚úÖ Fallback vers liste principale automatique
- ‚úÖ Email envoy√© quand m√™me (pas de perte)
- üí° Action √† faire : Aller dans la config et s√©lectionner le bon champ (ou recr√©er le champ dans Formidable)

---

**FIN DU GUIDE DE CONFIGURATION** - Version 1.0

---

## Cr√©dits

**Plugin d√©velopp√© par :** Kiora Tech

**Documentation r√©dig√©e par :** Assistant Documentation Technique

**Derni√®re mise √† jour :** 2025

**Support :** Pour toute question, consultez d'abord la section D√©pannage (section 8) et la FAQ (section 10). En cas de probl√®me persistant, contactez le support avec les logs [FSS].

---

**Bon usage du plugin WP Rolling Mail !**
